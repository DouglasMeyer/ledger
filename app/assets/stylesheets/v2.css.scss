@import "bourbon";
@import "normalize";

// Reset
* {
  @include box-sizing(border-box);
}
html, body { height: 100%; width: 100%; }
html { overflow: auto; }
body {
  position: relative;
  font-size: medium;
  line-height: 1.2;
  color: #444;
}
h1, h2, h3 { color: #222; }
input, select, textarea {
  background-color: white;
  border: 1px solid #888;
  font-size: 0.8em;
}
input { padding: 0 1ex; }
ul { margin: 0; padding: 0; }

// Elements
.currency {
  text-align: right;
  &.negative { color: red; }
}
.accounts-table {
  .assets-list, .liabilities-list {
    float: left;
    width: 50%;
    @media (max-width: 35em) { width: 100%; }

    h2 { text-align: center; }
    ul { list-style-type: none; }
    li { border-bottom: 1px dotted #DDD; }
    h3 {
      margin-bottom: 0;
      font-size: 80%;
      font-weight: normal;
      text-transform: uppercase;
      color: #888;
    }
  }
  .assets-list { padding-right: 2em; }
  .liabilities-list { padding-left: 2em; }
}

@mixin bank_entry {
  position: relative;
  min-height: 1.2em;

  .date, .description, .distribute, .ammount, .account {
    position: absolute; top: 0.1em;
  }
  .date { width: 8em; }
  .description {
    left: 8em;
    right: 18em;
    overflow: hidden;
    white-space: pre;
    text-overflow: ellipsis;
  }
  .ammount { width: 8em; right: 0; }
  .account { width: 10em; right: 8em; }
}

// This is more of a min-width
$bank-entry-width: 45em;
.bank-entries {
  margin: 1em 8em;
  @media (max-width: $bank-entry-width
                  + 16em // margins
                  ) { margin: 1em; }
  list-style-type: none;

  form .actions > * { margin-right: 1em; }
  form .actions { display: none; }
  form.changed .actions { display: initial; }
  form.changed .distribute { display: none; }
  .focus { background-color: #F0F0F0; }

  li {
    @include bank_entry;

    @media (max-width: $bank-entry-width) {
      padding-top: 1.2em;
      .description { right: 0; }
      margin-top: 1.2em;
      padding-bottom: 1.2em;
    }

    border-bottom: 1px dashed #DDD;
    &:last-child { border-bottom: none; }

    .date, .description, .distribute, .ammount, .account {
      z-index: 100;
    }
    .distribute {
      right: 18.5em;
      @media (max-width: $bank-entry-width) { right: 0; }
    }
    .account-entry {
      position: relative;
      height: 1.4em;
      input { width: 100%; }
    }
  }
}

form .actions { clear: both; }

// Layout
.navigation {
  font-size: 110%;
  width: 100%;
  @include linear-gradient(tint(black, 20%), black);
  .accounts, .entries {
    display: inline-block;
    border-right: 1px solid black;
    width: 10em;
    @media (max-width: 10em // width of the link
                      * 2   // number of links
                      * 1.1 // font-size
                      + 1em // scroll-bar
                      ) { width: 50%; }
    a {
      display: inline-block;
      height: 2em;
      line-height: 2em;
      width: 100%;
      text-align: center;
      color: #CCC;
    }
  }
  body.accounts & .accounts,
  body.bank_entries & .entries {
    background-color: black;
  }
  .count {
    position: absolute;
    display: inline-block;
    top: 1px;
    height: 1.4em;
    min-width: 1.4em;
    line-height: 1;
    font-size: 75%;
    font-weight: bold;
    background: #C00;
    color: white;
    border-radius: 1.3ex;
    padding: 3px;
  }
}

@import "./v2/accounts";
@import "./v2/bank_entries";
@import "./v2/strategies";
@import "./v2/icon-fonts";
